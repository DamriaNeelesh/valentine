<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Rose Day</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Great+Vibes&family=Sora:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
      :root {
        --bg-1: #ff9fbd;
        --bg-2: #ffd6e7;
        --bg-3: #fff3f8;

        --ink: #2a0c1a;
        --muted: rgba(42, 12, 26, 0.66);

        --card: rgba(255, 255, 255, 0.86);
        --shadow: 0 44px 130px rgba(42, 12, 26, 0.22);

        --accent-1: #b4003a;
        --accent-2: #ff2f7a;
        --accent-3: #ffb347;
        --leaf-1: #2f7d4a;
        --leaf-2: #53b86a;

        --radius: 34px;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        color: var(--ink);
        font-family: "Sora", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          sans-serif;
        background: radial-gradient(
            900px 700px at 12% 18%,
            rgba(255, 255, 255, 0.8),
            transparent 58%
          ),
          radial-gradient(
            1000px 780px at 90% 18%,
            rgba(180, 0, 58, 0.2),
            transparent 62%
          ),
          radial-gradient(
            900px 720px at 55% 110%,
            rgba(83, 184, 106, 0.16),
            transparent 60%
          ),
          linear-gradient(135deg, var(--bg-1), var(--bg-2) 52%, var(--bg-3));
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 32px 20px;
      }

      .bg-glow {
        position: fixed;
        inset: -40vh -40vw;
        background: radial-gradient(
            circle at 15% 30%,
            rgba(180, 0, 58, 0.22),
            transparent 35%
          ),
          radial-gradient(
            circle at 75% 20%,
            rgba(255, 179, 71, 0.18),
            transparent 40%
          ),
          radial-gradient(
            circle at 60% 80%,
            rgba(83, 184, 106, 0.16),
            transparent 40%
          );
        filter: blur(30px);
        pointer-events: none;
      }

      .petals {
        position: fixed;
        inset: 0;
        pointer-events: none;
      }

      .roses {
        position: fixed;
        inset: 0;
        pointer-events: none;
      }

      .roseFloat {
        --x: 50vw;
        --size: 28px;
        --dur: 22s;
        --delay: 0s;
        --drift: 0px;

        position: absolute;
        left: var(--x);
        bottom: -18vh;
        font-size: var(--size);
        opacity: 0.16;
        filter: saturate(1.08) blur(0.1px);
        transform: translate3d(0, 0, 0) rotate(-10deg);
        animation: roseUp var(--dur) linear infinite;
        animation-delay: var(--delay);
        will-change: transform, opacity;
      }

      @keyframes roseUp {
        0% {
          transform: translate3d(0, 0, 0) rotate(-10deg);
          opacity: 0;
        }
        12% {
          opacity: 0.22;
        }
        100% {
          transform: translate3d(var(--drift), -130vh, 0) rotate(22deg);
          opacity: 0;
        }
      }

      .roseBurst {
        --dx: 0px;
        --dy: -120px;

        position: fixed;
        left: 0;
        top: 0;
        transform: translate(-50%, -50%);
        font-size: 26px;
        opacity: 0;
        pointer-events: none;
        filter: drop-shadow(0 14px 22px rgba(180, 0, 58, 0.18));
        animation: rosePop 900ms cubic-bezier(0.2, 0.9, 0.2, 1) forwards;
        z-index: 140;
      }

      @keyframes rosePop {
        0% {
          transform: translate(-50%, -50%) scale(0.3) rotate(-12deg);
          opacity: 0;
        }
        15% {
          opacity: 1;
        }
        100% {
          transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy)))
            scale(1.15) rotate(18deg);
          opacity: 0;
        }
      }

      /* A petal is a rounded capsule with glossy highlight */
      .petal {
        --size: 18px;
        --x: 50vw;
        --dur: 16s;
        --delay: 0s;
        --drift: 0px;
        --rot: 0deg;
        --spin: 220deg;

        position: absolute;
        left: var(--x);
        top: -18vh;
        width: var(--size);
        height: calc(var(--size) * 1.35);
        border-radius: 72% 72% 88% 88% / 64% 64% 135% 135%;
        transform: rotate(var(--rot));
        opacity: 0.35;
        background: radial-gradient(
            circle at 28% 28%,
            rgba(255, 255, 255, 0.55),
            transparent 44%
          ),
          linear-gradient(
            165deg,
            rgba(255, 47, 122, 0.46),
            rgba(180, 0, 58, 0.22)
          );
        animation: petalFall var(--dur) linear infinite;
        animation-delay: var(--delay);
      }

      .petal::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: radial-gradient(
          62% 44% at 32% 26%,
          rgba(255, 255, 255, 0.36),
          transparent 62%
        );
        opacity: 0.9;
      }

      @keyframes petalFall {
        0% {
          transform: translate3d(0, 0, 0) rotate(var(--rot));
          opacity: 0;
        }
        12% {
          opacity: 0.65;
        }
        100% {
          transform: translate3d(var(--drift), 140vh, 0)
            rotate(calc(var(--rot) + var(--spin)));
          opacity: 0;
        }
      }

      .stage {
        width: min(560px, 100%);
        position: relative;
      }

      .card {
        --mx: 50%;
        --my: 18%;

        position: relative;
        border-radius: var(--radius);
        padding: 54px 44px 40px;
        background: linear-gradient(var(--card), var(--card)) padding-box,
          linear-gradient(
              135deg,
              rgba(180, 0, 58, 0.55),
              rgba(255, 47, 122, 0.45),
              rgba(83, 184, 106, 0.32)
            )
            border-box;
        border: 1px solid transparent;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
        overflow: hidden;
        transform-origin: 50% 60%;
        animation: popIn 600ms cubic-bezier(0.2, 0.9, 0.2, 1) both;
      }

      @keyframes popIn {
        from {
          opacity: 0;
          transform: translateY(14px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .card::before {
        content: "";
        position: absolute;
        inset: -2px;
        background: radial-gradient(
            420px 260px at var(--mx) var(--my),
            rgba(255, 255, 255, 0.78),
            transparent 62%
          ),
          radial-gradient(
            520px 260px at 84% 6%,
            rgba(255, 255, 255, 0.46),
            transparent 56%
          );
        opacity: 0.92;
        pointer-events: none;
      }

      .card::after {
        content: "";
        position: absolute;
        right: -110px;
        top: -110px;
        width: 280px;
        height: 280px;
        background: radial-gradient(
          circle at 35% 35%,
          rgba(180, 0, 58, 0.2),
          transparent 62%
        );
        filter: blur(2px);
        transform: rotate(14deg);
        pointer-events: none;
      }

      .ribbon {
        position: absolute;
        left: 50%;
        top: 18px;
        transform: translateX(-50%);
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 14px;
        border-radius: 999px;
        background: rgba(180, 0, 58, 0.08);
        border: 1px solid rgba(180, 0, 58, 0.16);
        color: rgba(42, 12, 26, 0.82);
        font-size: 12px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .ribbon i {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
        box-shadow: 0 0 0 6px rgba(180, 0, 58, 0.12);
      }

      .roseMark {
        width: 98px;
        height: 98px;
        margin: 2px auto 18px;
        position: relative;
        display: grid;
        place-items: center;
      }

      .roseMark svg {
        width: 98px;
        height: 98px;
        filter: drop-shadow(0 18px 26px rgba(180, 0, 58, 0.16));
        transform-origin: 50% 60%;
        animation: bloom 2400ms ease-in-out infinite;
      }

      .roseMark .ring {
        position: absolute;
        inset: -10px;
        border-radius: 999px;
        border: 1px dashed rgba(180, 0, 58, 0.22);
        animation: spin 9s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes bloom {
        0%,
        100% {
          transform: scale(1) rotate(-0.2deg);
        }
        50% {
          transform: scale(1.04) rotate(0.2deg);
        }
      }

      h1 {
        position: relative;
        margin: 0;
        font-family: "Fraunces", ui-serif, Georgia, serif;
        font-weight: 700;
        font-size: clamp(26px, 4.4vw, 36px);
        letter-spacing: -0.02em;
        line-height: 1.08;
        text-align: center;
      }

      .script {
        font-family: "Great Vibes", ui-serif, Georgia, serif;
        font-weight: 400;
        letter-spacing: 0;
        font-size: 1.22em;
        line-height: 1;
        color: rgba(180, 0, 58, 0.92);
        text-shadow: 0 18px 40px rgba(180, 0, 58, 0.12);
        white-space: nowrap;
      }

      .forLine {
        position: relative;
        margin: 6px 0 10px;
        text-align: center;
        font-size: 16px;
        color: rgba(42, 12, 26, 0.74);
      }

      .quoteText {
        position: relative;
        margin: 10px auto 18px;
        max-width: 42ch;
        text-align: center;
        font-family: "Fraunces", ui-serif, Georgia, serif;
        font-weight: 600;
        font-size: clamp(18px, 4vw, 24px);
        line-height: 1.28;
        letter-spacing: -0.01em;
        color: rgba(42, 12, 26, 0.86);
      }

      .question {
        margin: 6px 0 18px;
        font-size: clamp(22px, 4.8vw, 32px);
      }

      .sub {
        position: relative;
        margin: 14px auto 18px;
        max-width: 44ch;
        color: var(--muted);
        font-size: 15px;
        line-height: 1.6;
        text-align: center;
      }

      .chips {
        position: relative;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 24px;
      }

      .chip {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 999px;
        background: rgba(42, 12, 26, 0.04);
        border: 1px solid rgba(42, 12, 26, 0.08);
        color: rgba(42, 12, 26, 0.78);
        font-size: 13px;
      }

      .chip .dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: linear-gradient(135deg, var(--leaf-1), var(--leaf-2));
        box-shadow: 0 0 0 5px rgba(83, 184, 106, 0.12);
      }

      .signature {
        position: relative;
        margin: 2px 0 18px;
        text-align: center;
        font-size: 14px;
        color: rgba(42, 12, 26, 0.7);
      }

      .signature strong {
        font-weight: 600;
        color: rgba(42, 12, 26, 0.86);
      }

      .buttons {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 16px;
        flex-wrap: wrap;
        margin-top: 6px;
      }

      .btn {
        position: relative;
        border: none;
        padding: 14px 18px;
        border-radius: 999px;
        font-family: inherit;
        font-weight: 600;
        font-size: 15px;
        cursor: pointer;
        letter-spacing: 0.01em;
        transition: transform 180ms ease, box-shadow 180ms ease,
          background 180ms ease, filter 180ms ease;
        user-select: none;
        touch-action: manipulation;
      }

      .btn:focus-visible {
        outline: 3px solid rgba(180, 0, 58, 0.28);
        outline-offset: 3px;
      }

      .btn.primary {
        color: white;
        background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
        box-shadow: 0 18px 38px rgba(180, 0, 58, 0.22);
      }

      .btn.primary::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 999px;
        background: radial-gradient(
          120px 60px at 30% 30%,
          rgba(255, 255, 255, 0.42),
          transparent 55%
        );
        opacity: 0.95;
        mix-blend-mode: screen;
        pointer-events: none;
      }

      .btn.primary:hover {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 26px 56px rgba(180, 0, 58, 0.26);
      }

      .btn.primary:active {
        transform: translateY(0) scale(0.99);
      }

      .btn.secondary {
        color: rgba(42, 12, 26, 0.84);
        background: rgba(42, 12, 26, 0.06);
        border: 1px solid rgba(42, 12, 26, 0.1);
        box-shadow: none;
      }

      .btn.secondary:hover {
        transform: translateY(-1px);
        filter: brightness(1.03);
      }

      .btn.mini {
        padding: 10px 12px;
        font-size: 13px;
      }

      .roseBtn {
        width: 78px;
        height: 78px;
        padding: 0;
        display: grid;
        place-items: center;
        border-radius: 999px;
        font-size: 34px;
        line-height: 1;
        box-shadow: 0 18px 38px rgba(180, 0, 58, 0.22),
          0 0 0 0 rgba(180, 0, 58, 0.18);
        animation: roseGlow 2100ms ease-in-out infinite;
      }

      @keyframes roseGlow {
        0%,
        100% {
          box-shadow: 0 18px 38px rgba(180, 0, 58, 0.22),
            0 0 0 0 rgba(180, 0, 58, 0.16);
        }
        50% {
          box-shadow: 0 26px 60px rgba(180, 0, 58, 0.26),
            0 0 0 14px rgba(180, 0, 58, 0.1);
        }
      }

      .btn.ghost {
        color: rgba(42, 12, 26, 0.78);
        background: rgba(180, 0, 58, 0.06);
        border: 1px solid rgba(180, 0, 58, 0.12);
        backdrop-filter: blur(6px);
      }

      .btn.ghost:hover {
        transform: translateY(-1px);
        filter: brightness(1.03);
      }

      #noBtn {
        cursor: not-allowed;
        -webkit-tap-highlight-color: transparent;
        touch-action: none;
        will-change: left, top;
      }

      #noBtn:hover,
      #noBtn:active {
        transform: none;
        filter: none;
      }

      .note {
        position: relative;
        margin: 18px 0 0;
        font-size: 13px;
        color: rgba(42, 12, 26, 0.56);
        text-align: center;
      }

      .note code {
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        font-size: 0.95em;
        color: rgba(42, 12, 26, 0.75);
        background: rgba(42, 12, 26, 0.05);
        border: 1px solid rgba(42, 12, 26, 0.08);
        padding: 3px 7px;
        border-radius: 10px;
        white-space: nowrap;
      }

      .toast {
        position: fixed;
        left: 50%;
        bottom: 24px;
        transform: translateX(-50%);
        background: rgba(42, 12, 26, 0.88);
        color: white;
        padding: 12px 14px;
        border-radius: 14px;
        font-size: 13px;
        line-height: 1.3;
        box-shadow: 0 18px 50px rgba(0, 0, 0, 0.25);
        opacity: 0;
        pointer-events: none;
        transition: opacity 200ms ease, transform 200ms ease;
        z-index: 120;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(-4px);
      }

      .modal {
        position: fixed;
        inset: 0;
        display: grid;
        place-items: center;
        padding: 28px 20px;
        background: rgba(18, 10, 14, 0.46);
        backdrop-filter: blur(7px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 200ms ease;
        z-index: 100;
      }

      .modal.open {
        opacity: 1;
        pointer-events: auto;
      }

      .sheet {
        width: min(560px, 100%);
        max-height: min(720px, calc(100vh - 56px));
        border-radius: 28px;
        background: rgba(255, 255, 255, 0.92);
        border: 1px solid rgba(255, 255, 255, 0.55);
        box-shadow: 0 40px 150px rgba(0, 0, 0, 0.35);
        padding: 26px 24px 22px;
        position: relative;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
      }

      .sheet::before {
        content: "";
        position: absolute;
        inset: -2px;
        background: radial-gradient(
            600px 220px at 35% 0%,
            rgba(255, 255, 255, 0.75),
            transparent 62%
          ),
          radial-gradient(
            420px 240px at 85% 12%,
            rgba(83, 184, 106, 0.16),
            transparent 62%
          );
        pointer-events: none;
      }

      .srOnly {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .sheetTop {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
      }

      .dayPill {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 999px;
        background: rgba(180, 0, 58, 0.08);
        border: 1px solid rgba(180, 0, 58, 0.14);
        color: rgba(42, 12, 26, 0.82);
        font-size: 12px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        white-space: nowrap;
      }

      .miniDot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
        box-shadow: 0 0 0 5px rgba(180, 0, 58, 0.12);
      }

      .topActions {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .dedication {
        position: relative;
        margin: 6px auto 16px;
        text-align: center;
        font-size: 14px;
        color: rgba(42, 12, 26, 0.72);
      }

      .sep {
        margin: 0 10px;
        opacity: 0.55;
      }

      .photoFrame {
        position: relative;
        width: min(240px, 78vw);
        aspect-ratio: 2 / 3;
        margin: 0 auto 14px;
        border-radius: 26px;
        overflow: hidden;
        background: rgba(42, 12, 26, 0.05);
        border: 1px solid rgba(180, 0, 58, 0.14);
        box-shadow: 0 26px 90px rgba(42, 12, 26, 0.18);
      }

      .photoFrame::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          130px 80px at 30% 22%,
          rgba(255, 255, 255, 0.38),
          transparent 62%
        );
        pointer-events: none;
      }

      .photo {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: scale(1.01);
      }

      .finalQuote {
        position: relative;
        margin: 14px auto 0;
        text-align: center;
        font-family: "Fraunces", ui-serif, Georgia, serif;
        font-weight: 700;
        font-size: clamp(24px, 4.8vw, 36px);
        letter-spacing: -0.02em;
        line-height: 1.12;
        color: rgba(42, 12, 26, 0.92);
        text-shadow: 0 18px 60px rgba(180, 0, 58, 0.12);
      }

      .finalQuote .accentLine {
        color: rgba(180, 0, 58, 0.92);
      }

      .roseToken {
        width: 94px;
        height: 94px;
        margin: 0 auto 12px;
        display: grid;
        place-items: center;
        border-radius: 999px;
        background: radial-gradient(
            60px 60px at 30% 25%,
            rgba(255, 255, 255, 0.86),
            transparent 60%
          ),
          linear-gradient(
            135deg,
            rgba(180, 0, 58, 0.12),
            rgba(255, 47, 122, 0.09),
            rgba(83, 184, 106, 0.08)
          );
        border: 1px solid rgba(180, 0, 58, 0.12);
        box-shadow: 0 26px 90px rgba(180, 0, 58, 0.16);
        position: relative;
        overflow: hidden;
      }

      .roseToken::after {
        content: "";
        position: absolute;
        inset: -2px;
        background: radial-gradient(
          110px 60px at 30% 18%,
          rgba(255, 255, 255, 0.55),
          transparent 62%
        );
        pointer-events: none;
      }

      .roseToken svg {
        width: 58px;
        height: 58px;
        filter: drop-shadow(0 14px 24px rgba(180, 0, 58, 0.15));
      }

      .sheet h2 {
        position: relative;
        margin: 0;
        font-family: "Fraunces", ui-serif, Georgia, serif;
        font-size: 30px;
        letter-spacing: -0.02em;
        line-height: 1.06;
        text-align: center;
      }

      .sheet p {
        position: relative;
        margin: 12px auto 0;
        max-width: 58ch;
        color: rgba(42, 12, 26, 0.74);
        line-height: 1.65;
        text-align: center;
      }

      .sheet .actions {
        position: relative;
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 18px;
      }

      .sheet .actions .btn {
        padding: 12px 14px;
        font-size: 14px;
      }

      .sheet .actions .btn.secondary {
        background: rgba(42, 12, 26, 0.06);
        color: rgba(42, 12, 26, 0.84);
        border: 1px solid rgba(42, 12, 26, 0.1);
        box-shadow: none;
      }

      .sheet .actions .btn.secondary:hover {
        transform: translateY(-1px);
      }

      @media (max-width: 440px) {
        .card {
          padding: 48px 22px 34px;
        }

        .ribbon {
          top: 14px;
        }

        .buttons {
          gap: 12px;
        }

        .toast {
          width: calc(100% - 36px);
          text-align: center;
        }

        .note code {
          white-space: normal;
          word-break: break-word;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .petal,
        .roseFloat,
        .roseBurst,
        .roseBtn,
        .roseMark .ring,
        .roseMark svg {
          animation: none !important;
        }

        .card {
          animation: none !important;
        }

        .btn {
          transition: none !important;
        }
      }
    </style>
  </head>

  <body>
    <div class="bg-glow" aria-hidden="true"></div>
    <div class="petals" id="petals" aria-hidden="true"></div>
    <div class="roses" id="roses" aria-hidden="true"></div>

    <main class="stage">
      <section class="card" id="card" aria-label="Rose Day card">
        <div class="ribbon"><i aria-hidden="true"></i> Day 1 - Rose Day</div>

        <div class="roseMark" aria-hidden="true">
          <div class="ring"></div>
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M32 10c-9 0-16 7-16 16 0 6.2 3.1 11.4 7.1 15.5 3.1 3.1 4.2 6.4 4.2 10.1v1.3h9.4v-1.3c0-3.7 1.1-7 4.2-10.1C44.9 37.4 48 32.2 48 26c0-9-7-16-16-16z"
              fill="url(#petalG1)"
            />
            <path
              d="M23 27c2.7-3 6-4.5 9-4.5s6.3 1.5 9 4.5"
              stroke="rgba(255,255,255,0.62)"
              stroke-width="1.2"
              stroke-linecap="round"
            />
            <path
              d="M32 20c-5 0-9 4-9 9 0 4.2 2.4 7 5 9.4"
              stroke="rgba(255,255,255,0.55)"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M32 20c5 0 9 4 9 9 0 4.2-2.4 7-5 9.4"
              stroke="rgba(255,255,255,0.55)"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M32 42v12"
              stroke="url(#stemG1)"
              stroke-width="2.6"
              stroke-linecap="round"
            />
            <path
              d="M31.5 50c-9 .7-15 6.2-16.2 13.2 8-1.1 14.7-6.2 16.2-13.2z"
              fill="url(#leafG1)"
              opacity="0.95"
            />
            <path
              d="M32.5 50c9 .7 15 6.2 16.2 13.2-8-1.1-14.7-6.2-16.2-13.2z"
              fill="url(#leafG1)"
              opacity="0.9"
            />
            <defs>
              <linearGradient
                id="petalG1"
                x1="16"
                y1="10"
                x2="50"
                y2="48"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#b4003a" />
                <stop offset="0.55" stop-color="#ff2f7a" />
                <stop offset="1" stop-color="#ffb347" />
              </linearGradient>
              <linearGradient
                id="stemG1"
                x1="32"
                y1="42"
                x2="32"
                y2="56"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#53b86a" />
                <stop offset="1" stop-color="#2f7d4a" />
              </linearGradient>
              <linearGradient
                id="leafG1"
                x1="15"
                y1="50"
                x2="50"
                y2="64"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#53b86a" />
                <stop offset="1" stop-color="#2f7d4a" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        <div class="forLine">For <span class="script" id="toName">Sana</span></div>

        <p class="quoteText">
          I didnâ€™t fall in love suddenly,<br />
          I walked into it, every day, choosing you
        </p>

        <h1 class="question">Will you accept my rose ?</h1>

        <div class="buttons" id="buttons">
          <button
            id="yesBtn"
            class="btn primary roseBtn"
            type="button"
            aria-label="Accept my rose"
          >
            ðŸŒ¹
          </button>
          <button id="noBtn" class="btn ghost" type="button">
            No
          </button>
        </div>

        <div class="signature">From <strong id="fromName">Adil Khan</strong></div>

        <!-- <p class="note" id="note">
          Tip: personalize with <code>?to=Sana&amp;from=Adil%20Khan</code>
        </p> -->
      </section>
    </main>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <div
      class="modal"
      id="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modalTitle"
      aria-hidden="true"
    >
      <div class="sheet">
        <h2 id="modalTitle" class="srOnly">Day 1: Rose Day</h2>

        <div class="sheetTop">
          <div class="dayPill">
            <span class="miniDot" aria-hidden="true"></span> Day 1 - Rose Day
          </div>
          <div class="topActions">
            <button id="replayBtn" class="btn secondary mini" type="button">
              Petal shower
            </button>
          </div>
        </div>

        <div class="dedication">
          For <span class="script" id="modalTo">Sana</span>
          <span class="sep">|</span>
          From <span id="modalFrom">Adil Khan</span>
        </div>

        <div class="photoFrame">
          <img src="adil-sana.jpeg" alt="Adil and Sana" class="photo" />
        </div>

        <div class="finalQuote">
          Every rose fades one day,<br />
          <span class="accentLine">But what I feel for you only grows.</span>
        </div>
      </div>
    </div>

    <script>
      (() => {
        const DEFAULT_TO = "Sana";
        const DEFAULT_FROM = "Adil Khan";

        const card = document.getElementById("card");
        const petals = document.getElementById("petals");
        const roses = document.getElementById("roses");
        const noBtn = document.getElementById("noBtn");
        const yesBtn = document.getElementById("yesBtn");
        const toast = document.getElementById("toast");
        const modal = document.getElementById("modal");
        const replayBtn = document.getElementById("replayBtn");
        const toName = document.getElementById("toName");
        const fromName = document.getElementById("fromName");
        const modalTo = document.getElementById("modalTo");
        const modalFrom = document.getElementById("modalFrom");

        let escaped = false;
        let initialRect = null;
        let toastTimer = null;
        let noEscapes = 0;
        let lastEscapeAt = 0;

        function showToast(message) {
          toast.textContent = message;
          toast.classList.add("show");
          window.clearTimeout(toastTimer);
          toastTimer = window.setTimeout(() => toast.classList.remove("show"), 1200);
        }

        function normalizeName(value, fallback) {
          const v = (value || "").trim();
          return v.length ? v : fallback;
        }

        function prefersReducedMotion() {
          return (
            window.matchMedia &&
            window.matchMedia("(prefers-reduced-motion: reduce)").matches
          );
        }

        function applyPersonalization() {
          const params = new URLSearchParams(window.location.search);
          const to = normalizeName(params.get("to") || params.get("name"), DEFAULT_TO);
          const from = normalizeName(params.get("from"), DEFAULT_FROM);

          toName.textContent = to;
          modalTo.textContent = to;
          fromName.textContent = from;
          modalFrom.textContent = from;

          document.title = `Happy Rose Day, ${to}`;
        }

        function spawnPetals() {
          if (prefersReducedMotion()) return;

          const count = 28;
          for (let i = 0; i < count; i++) {
            const el = document.createElement("div");
            el.className = "petal";

            const size = 12 + Math.random() * 20;
            const x = Math.random() * 100;
            const dur = 10 + Math.random() * 14;
            const delay = -Math.random() * dur;
            const drift = (Math.random() * 140 - 70).toFixed(1) + "px";
            const rot = (Math.random() * 100 - 50).toFixed(1) + "deg";
            const spin = (160 + Math.random() * 260).toFixed(1) + "deg";
            const opacity = 0.16 + Math.random() * 0.22;

            el.style.setProperty("--size", size.toFixed(1) + "px");
            el.style.setProperty("--x", x.toFixed(2) + "vw");
            el.style.setProperty("--dur", dur.toFixed(2) + "s");
            el.style.setProperty("--delay", delay.toFixed(2) + "s");
            el.style.setProperty("--drift", drift);
            el.style.setProperty("--rot", rot);
            el.style.setProperty("--spin", spin);
            el.style.opacity = opacity.toFixed(3);

            petals.appendChild(el);
          }
        }

        function spawnRoses() {
          if (prefersReducedMotion()) return;
          if (!roses) return;

          const count = 16;
          for (let i = 0; i < count; i++) {
            const el = document.createElement("div");
            el.className = "roseFloat";
            el.textContent = "ðŸŒ¹";

            const size = 18 + Math.random() * 26;
            const x = Math.random() * 100;
            const dur = 18 + Math.random() * 18;
            const delay = -Math.random() * dur;
            const drift = (Math.random() * 220 - 110).toFixed(1) + "px";
            const opacity = 0.08 + Math.random() * 0.18;

            el.style.setProperty("--size", size.toFixed(1) + "px");
            el.style.setProperty("--x", x.toFixed(2) + "vw");
            el.style.setProperty("--dur", dur.toFixed(2) + "s");
            el.style.setProperty("--delay", delay.toFixed(2) + "s");
            el.style.setProperty("--drift", drift);
            el.style.opacity = opacity.toFixed(3);

            roses.appendChild(el);
          }
        }

        function burstRosesAt(x, y) {
          if (prefersReducedMotion()) return;

          const count = 12;
          for (let i = 0; i < count; i++) {
            const el = document.createElement("div");
            el.className = "roseBurst";
            el.textContent = "ðŸŒ¹";

            el.style.left = `${x}px`;
            el.style.top = `${y}px`;

            const dx = (Math.random() * 340 - 170).toFixed(1) + "px";
            const dy = (-(110 + Math.random() * 210)).toFixed(1) + "px";
            el.style.setProperty("--dx", dx);
            el.style.setProperty("--dy", dy);

            el.style.fontSize = (18 + Math.random() * 16).toFixed(1) + "px";
            el.style.animationDuration = (760 + Math.random() * 520).toFixed(0) + "ms";

            document.body.appendChild(el);
            el.addEventListener("animationend", () => el.remove(), { once: true });
          }
        }

        function escapeNoButton() {
          const now = Date.now();
          if (now - lastEscapeAt < 140) return;
          lastEscapeAt = now;

          if (!escaped) {
            initialRect = noBtn.getBoundingClientRect();
            noBtn.style.position = "fixed";
            noBtn.style.left = initialRect.left + "px";
            noBtn.style.top = initialRect.top + "px";
            noBtn.style.zIndex = "50";
            escaped = true;
          }

          const padding = 16;
          const yesRect = yesBtn.getBoundingClientRect();
          const noRect = noBtn.getBoundingClientRect();

          let x, y, safe;
          let attempts = 0;

          do {
            x =
              Math.random() *
                (window.innerWidth - noRect.width - padding * 2) +
              padding;
            y =
              Math.random() *
                (window.innerHeight - noRect.height - padding * 2) +
              padding;

            safe =
              x + noRect.width < yesRect.left ||
              x > yesRect.right ||
              y + noRect.height < yesRect.top ||
              y > yesRect.bottom;

            attempts++;
          } while (!safe && attempts < 60);

          noBtn.style.left = `${x}px`;
          noBtn.style.top = `${y}px`;
        }

        function petalShower() {
          if (typeof confetti !== "function") return;

          if (prefersReducedMotion()) return;

          const colors = ["#b4003a", "#ff2f7a", "#ff6aa7", "#ffd6e7", "#ffb347"];
          const end = Date.now() + 2200;

          (function frame() {
            confetti({
              particleCount: 14,
              spread: 95,
              startVelocity: 42,
              ticks: 240,
              gravity: 1.12,
              scalar: 1.06,
              colors,
              shapes: ["circle"],
              origin: { x: 0.2, y: 0.75 },
            });
            confetti({
              particleCount: 14,
              spread: 95,
              startVelocity: 42,
              ticks: 240,
              gravity: 1.12,
              scalar: 1.06,
              colors,
              shapes: ["circle"],
              origin: { x: 0.8, y: 0.75 },
            });

            if (Date.now() < end) requestAnimationFrame(frame);
          })();

          window.setTimeout(() => {
            confetti({
              particleCount: 120,
              spread: 125,
              startVelocity: 50,
              ticks: 280,
              gravity: 1.02,
              scalar: 1.02,
              colors: [...colors, "#53b86a"],
              shapes: ["circle", "square"],
              origin: { x: 0.5, y: 0.62 },
            });
          }, 620);
        }

        function openModal() {
          modal.classList.add("open");
          modal.setAttribute("aria-hidden", "false");
          const focusTarget = replayBtn;
          if (focusTarget) focusTarget.focus({ preventScroll: true });
        }

        function closeModal() {
          modal.classList.remove("open");
          modal.setAttribute("aria-hidden", "true");
          yesBtn.focus({ preventScroll: true });
        }

        // Card spotlight follows cursor
        card.addEventListener("pointermove", (e) => {
          const r = card.getBoundingClientRect();
          const x = ((e.clientX - r.left) / r.width) * 100;
          const y = ((e.clientY - r.top) / r.height) * 100;
          card.style.setProperty("--mx", x.toFixed(2) + "%");
          card.style.setProperty("--my", y.toFixed(2) + "%");
        });
        card.addEventListener("pointerleave", () => {
          card.style.setProperty("--mx", "50%");
          card.style.setProperty("--my", "18%");
        });

        function maybeEscapeFromPoint(clientX, clientY, threshold) {
          const rect = noBtn.getBoundingClientRect();
          const cx = rect.left + rect.width / 2;
          const cy = rect.top + rect.height / 2;
          const distance = Math.hypot(clientX - cx, clientY - cy);
          if (distance < threshold) escapeNoButton();
        }

        noBtn.addEventListener("touchstart", (e) => {
          e.preventDefault();
          e.stopPropagation();
          escapeNoButton();
        });

        noBtn.addEventListener("pointerdown", (e) => {
          e.preventDefault();
          e.stopPropagation();
          escapeNoButton();

          noEscapes++;
          const lines = [
            "Nice try.",
            "The roses say: yes only.",
            "No button is hiding in the rose garden.",
            "Too slow. The petals moved it.",
            "Okay okay... still no. (Just kidding.)",
          ];
          showToast(lines[noEscapes % lines.length]);
        });

        noBtn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          escapeNoButton();
        });

        noBtn.addEventListener("focus", () => {
          escapeNoButton();
          showToast("Almost. Try the other one.");
        });

        // Flee when pointer is near (mouse + touch)
        document.addEventListener("pointermove", (e) => {
          const t = e.pointerType === "touch" ? 160 : 120;
          maybeEscapeFromPoint(e.clientX, e.clientY, t);
        });

        document.addEventListener("pointerdown", (e) => {
          if (e.pointerType !== "touch") return;
          maybeEscapeFromPoint(e.clientX, e.clientY, 190);
        });

        window.addEventListener("resize", () => {
          if (escaped) escapeNoButton();
        });

        // Yes behavior
        yesBtn.addEventListener("click", () => {
          const r = yesBtn.getBoundingClientRect();
          burstRosesAt(r.left + r.width / 2, r.top + r.height / 2);
          petalShower();
          openModal();
        });

        replayBtn.addEventListener("click", petalShower);

        modal.addEventListener("click", (e) => {
          if (e.target === modal) closeModal();
        });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && modal.classList.contains("open")) closeModal();
        });

        applyPersonalization();
        spawnPetals();
        spawnRoses();
      })();
    </script>
  </body>
</html>
